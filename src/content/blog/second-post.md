---
title: '執筆フローを自動化する試み'
description: 'Markdown原稿からnote・Qiita・Zennへ展開するためのツール整備について振り返ります。'
pubDate: 'Jul 15 2022'
heroImage: '../../assets/og-placeholder.svg'
---

ブログの立ち上げが一段落したので、次は公開フローの自動化に着手しました。Astroで管理しているMarkdownを共通原稿とし、外部サービス向けには変換スクリプトで差分調整を行います。QiitaはAPI経由で下書き作成まで自動化できる一方、noteは手動投稿が前提なので、装飾を崩さずに貼り付けられるテンプレートを整えることにしました。

各サービスでサポートしているMarkdownの方言が違うため、変換処理は想像以上に奥が深いです。たとえばQiitaの注釈やZennの図表埋め込みなど、エディタ固有の記法を尊重しながら、ローカルでは極力素のMarkdownで編集を完結させたいというバランスに悩まされています。現状はremarkプラグインを組み合わせ、Frontmatterに設定したオプションを読み取って出力を切り替える方式に落ち着きました。

自動化の恩恵として、公開直前のチェックリストが明確になったのは大きなメリットです。記事の文字数、見出しの階層、OGP用のサムネイル有無などを事前に検証し、CLIが通れば安心して投稿作業に進めます。ゆくゆくはGitHub Actionsでの定期配信や、予約投稿に向けたワークフローも整備したいところです。

このフローが完成すれば、執筆はローカルで集中して行い、公開時はコマンド一つで複数プラットフォームへ展開できる理想に近づきます。作業の自動化は一度構築すると維持が大変ですが、継続的にアウトプットするための投資として、コツコツ改善を続けていくつもりです。
